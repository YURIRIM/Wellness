<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>ìŠµê´€ ë“±ë¡</title>
  <style>
      /* ì „ì²´ ë°°ê²½ ë° í°íŠ¸ */
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f0f3f7;
        margin: 0;
        padding: 50px 20px;
        display: flex;
        justify-content: center;
        min-height: 100vh;
        color: #333;
      }

      /* í¼ ë°•ìŠ¤ */
      form {
        background-color: #fff;
        border-radius: 16px;
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
        padding: 36px 48px;
        max-width: 720px;
        width: 100%;
        box-sizing: border-box;
      }

      /* ì œëª© */
      h2 {
        text-align: center;
        margin-bottom: 36px;
        font-weight: 700;
        font-size: 1.8rem;
        color: #1a202c;
        letter-spacing: -0.02em;
      }
	  

      /* í¼ ê° í•­ëª© ê°„ê²© */
      form > div {
        margin-bottom: 24px;
      }

      /* ë¼ë²¨ */
      label {
        display: inline-block;
        font-weight: 600;
        margin-bottom: 8px;
        color: #4a5568;
        cursor: pointer;
        user-select: none;
      }

      /* í…ìŠ¤íŠ¸, ì…€ë ‰íŠ¸, ë„˜ë²„, íƒ€ì„ ì…ë ¥ */
      input[type="text"],
      input[type="number"],
      input[type="time"],
      select {
        width: 100%;
        padding: 10px 14px;
        border-radius: 10px;
        border: 1.8px solid #cbd5e1;
        font-size: 1rem;
        transition: border-color 0.25s ease;
        box-sizing: border-box;
        outline-offset: 2px;
      }
      input[type="text"]:focus,
      input[type="number"]:focus,
      input[type="time"]:focus,
      select:focus {
        border-color: #4299e1;
        box-shadow: 0 0 6px #90cdf4;
      }

      /* ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
      input[type="checkbox"] {
        margin-right: 8px;
        width: 18px;
        height: 18px;
        vertical-align: middle;
        cursor: pointer;
      }

      /* ë¼ë””ì˜¤, ì²´í¬ë°•ìŠ¤ ë¼ë²¨ */
      #weeklyOptionSelector label,
      #weekDaysIntervalSection label,
      #weekDaysNthSection label,
      #nthWeekSection label {
        font-weight: 500;
        color: #2d3748;
        cursor: pointer;
        user-select: none;
        margin-right: 16px;
        margin-bottom: 10px;
        display: inline-flex;
        align-items: center;
        font-size: 0.95rem;
      }

      /* ê·¸ë£¹ ì œëª© */
      .option-group strong {
        display: block;
        margin-bottom: 8px;
        font-weight: 700;
        color: #2c5282;
        font-size: 1.05rem;
      }

      /* form-row í”Œë ‰ìŠ¤ */
      .form-row {
        display: flex;
        align-items: center;
        gap: 14px;
        margin-top: 10px;
      }

      /* ë²„íŠ¼ */
      button {
        width: 100%;
        background-color: #2b6cb0;
        color: white;
        border: none;
        border-radius: 12px;
        padding: 14px 0;
        font-size: 1.1rem;
        font-weight: 700;
        cursor: pointer;
        transition: background-color 0.25s ease;
        user-select: none;
      }
      button:hover {
        background-color: #2c5282;
      }

      /* ë‹¬ë ¥ í—¤ë” */
      #calendarHeaderContainer {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 18px;
        margin: 28px 0 12px;
      }

      #calendarHeader {
        font-size: 1.4rem;
        font-weight: 700;
        color: #2a4365;
        min-width: 150px;
        text-align: center;
        user-select: none;
      }

      #prevMonthBtn, #nextMonthBtn {
		width: 10%;
        background-color: #e2e8f0;
        border: none;
        padding: 8px 14px;
        border-radius: 10px;
        font-weight: 600;
        color: #2a4365;
        cursor: pointer;
        user-select: none;
        transition: background-color 0.2s ease;
      }
      #prevMonthBtn:hover, #nextMonthBtn:hover {
        background-color: #cbd5e1;
      }

      /* ë‹¬ë ¥ ê·¸ë¦¬ë“œ */
      .calendar {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 8px;
        width: 100%;
        min-height: 380px;
        box-sizing: border-box;
      }

      /* ë‹¬ë ¥ ì¼ì */
      .day {
        background-color: #fff;
        border: 1.5px solid #cbd5e1;
        border-radius: 12px;
        text-align: center;
        padding: 8px 6px;
        height: 66px;
        position: relative;
        font-size: 0.9rem;
        color: #2d3748;
        user-select: none;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: 500;
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }

      .day.header {
        font-weight: 700;
        background-color: #e9f0fc;
        border: none;
        color: #4a5568;
        user-select: none;
      }
	  

      /* ê°•ì¡°ëœ ë‚  */
      .day.highlight {
        background-color: #bee3f8;
        border-color: #4299e1;
        color: #1a365d;
        font-weight: 700;
      }

      /* ì˜¤ëŠ˜ ë‚ ì§œ */
      .day.today {
        border: 2.5px solid #3182ce;
        color: #3182ce;
        font-weight: 700;
        box-shadow: 0 0 6px #90cdf4;
      }

      /* ì‹œê°„ ë¼ë²¨ */
      .timeLabel {
        font-size: 0.75rem;
        color: #2c5282;
        position: absolute;
        bottom: 6px;
        right: 6px;
        font-weight: 600;
      }

      /* ì²´í¬ë°•ìŠ¤ ê·¸ë£¹ ì •ë ¬ */
      .checkbox-group label {
        display: inline-block;
        margin-right: 12px;
        margin-bottom: 8px;
        cursor: pointer;
        font-weight: 500;
        color: #2d3748;
      }

      /* ë°˜ì‘í˜• */
      @media (max-width: 768px) {
        body {
          padding: 30px 10px;
        }
        form {
          padding: 28px 20px;
          max-width: 100%;
        }
        input[type="text"],
        input[type="number"],
        select,
        input[type="time"] {
          width: 100%;
        }
        .form-row {
          flex-direction: column;
          align-items: flex-start;
        }
        #calendarHeaderContainer {
          flex-direction: column;
          gap: 12px;
        }
        #prevMonthBtn, #nextMonthBtn {
          width: 100%;
          max-width: 200px;
        }
        #calendar {
          min-height: 320px;
        }
      }
	  
	  
	  .example { font-size: 0.9rem; color: #666; margin-top: 0.3rem; }
    </style>
	
	
	
	
	
	
  <script>
	let calendarYear, calendarMonth;

	const weekdayMap = { SUN: 0, MON: 1, TUE: 2, WED: 3, THU: 4, FRI: 5, SAT: 6 };

    const unitMap = {
      DAILY: "ì¼",
      WEEKLY: "ì£¼",
      WEEKLY_COUNT: "ì£¼",
      MONTHLY_COUNT: "ì›”"
    };

    function updateIntervalUnit() {
      const type = document.getElementById("repeatType").value;
      const intervalInput = document.querySelector("input[name='repeat.interval']");
      const unitElement = document.getElementById("intervalUnit");
      const interval = parseInt(intervalInput.value, 10) || 1;
      const unitText = unitMap[type];
      unitElement.innerText = unitText ? (interval === 1 ? `ë§¤${unitText}` : `${interval}${unitText}ë§ˆë‹¤`) : "";
    }

	function onRepeatTypeChange() {
	  const type = document.getElementById("repeatType").value;
	  // "weeklyOption" ë¼ë””ì˜¤ ì¤‘ ì„ íƒëœ ê°’ ê°€ì ¸ì˜¤ê¸°, ì—†ìœ¼ë©´ ê¸°ë³¸ "interval" í• ë‹¹
	  const weeklyOptions = document.getElementsByName("weeklyOption");
	  let weeklyOption = "interval";
	  for(let opt of weeklyOptions) {
		if(opt.checked) {
		  weeklyOption = opt.value;
		  break;
		}
	  }

	  // ë§Œì•½ ë°˜ë³µ ìœ í˜•ì´ WEEKLYê°€ ì•„ë‹ˆë©´ ë¼ë””ì˜¤ ë²„íŠ¼ ì´ˆê¸°í™” ë° ìˆ¨ê¹€
	  if(type !== "WEEKLY") {
		document.getElementById("weeklyOptionSelector").style.display = "none";
		// ë¼ë””ì˜¤ ì´ˆê¸°í™” (interval ì²´í¬)
		weeklyOptions.forEach(opt => opt.checked = false);
		weeklyOptions[0].checked = true; // ì²«ë²ˆì§¸ 'interval' ì²´í¬
		weeklyOption = "interval";
	  } else {
		document.getElementById("weeklyOptionSelector").style.display = "block";
	  }

	  // WEEKLYì¸ ê²½ìš°
	  if (type === "WEEKLY") {
	    document.getElementById("weekDaysSection").style.display = "block";
	    document.getElementById("nthWeekSection").style.display = (weeklyOption === "nth") ? "block" : "none";
	  } else {
	    document.getElementById("weekDaysSection").style.display = "none";
	    document.getElementById("nthWeekSection").style.display = "none";
	  }

	  // ë°˜ë³µ ê°„ê²© í‘œì‹œ ì—¬ë¶€ (DAILY ë˜ëŠ” WEEKLY + intervalì¼ë•Œë§Œ)
	  const showInterval = (type === "DAILY") || (type === "WEEKLY" && weeklyOption === "interval");
	  document.getElementById("intervalSection").style.display = showInterval ? "block" : "none";

	  // ì£¼ NíšŒ, ì›” NíšŒ ë°˜ë³µ íšŸìˆ˜ í‘œì‹œ ì—¬ë¶€
	  document.getElementById("repeatFrequencySection").style.display = (type === "WEEKLY_COUNT" || type === "MONTHLY_COUNT") ? "block" : "none";
	  document.getElementById("frequencyUnitText").innerText = unitMap[type] || "";

	  // ì‹œê°„ ì˜µì…˜ í‘œì‹œ ì—¬ë¶€ (DAILY ë˜ëŠ” WEEKLY)
	  document.getElementById("timeOptionSection").style.display = (type === "DAILY" || type === "WEEKLY") ? "block" : "none";

	  // ìš”ì¼ ì²´í¬ë°•ìŠ¤ ì„¸ë¶€ í‘œì‹œ ì¡°ì •
	  if(type === "WEEKLY") {
		document.getElementById("weekDaysIntervalSection").style.display = (weeklyOption === "interval") ? "block" : "none";
		document.getElementById("weekDaysNthSection").style.display = (weeklyOption === "nth") ? "block" : "none";
	  } else {
		document.getElementById("weekDaysIntervalSection").style.display = "none";
		document.getElementById("weekDaysNthSection").style.display = "none";
	  }

	  updateIntervalUnit();
	  updateTimeVisibility();
	  
	  const calendarVisible = (type === "DAILY" || type === "WEEKLY");
	   document.getElementById("calendar").style.display = calendarVisible ? "grid" : "none";
	   document.getElementById("calendarHeaderContainer").style.display = calendarVisible ? "block" : "none";

	  
	  renderCalendar();
	}

	function onWeeklyOptionChange() {
	  const type = document.getElementById("repeatType").value;
	  const selected = document.querySelector("input[name='weeklyOption']:checked")?.value || "interval";

	  // ìš”ì¼ ì²´í¬ë°•ìŠ¤ ì„¸ë¶€ ì˜ì—­ í‘œì‹œ
	  document.getElementById("weekDaysSection").style.display = "block";
	  document.getElementById("nthWeekSection").style.display = selected === "nth" ? "block" : "none";

	  document.getElementById("weekDaysIntervalSection").style.display = selected === "interval" ? "block" : "none";
	  document.getElementById("weekDaysNthSection").style.display = selected === "nth" ? "block" : "none";

	  // ë°˜ë³µ ê°„ê²© í‘œì‹œ
	  const showInterval = (type === "DAILY") || (type === "WEEKLY" && selected === "interval");
	  document.getElementById("intervalSection").style.display = showInterval ? "block" : "none";

	  renderCalendar();
	}

    function updateTimeVisibility() {
      const allDay = document.getElementById("allDay").checked;
      document.getElementById("timeSection").style.display = allDay ? "none" : "block";
    }

	function selectWeekDays(group, checked) {
	  const className = group === 'weekdays' ? 'weekday-interval' : 'weekend-interval';
	  document.querySelectorAll(`.${className}`).forEach(cb => cb.checked = checked);
	  renderCalendar();
	}

	function selectNthWeekDays(group, checked) {
	  const className = group === 'weekday-nth' ? 'weekday-nth' : 'weekend-nth';
	  document.querySelectorAll(`.${className}`).forEach(cb => cb.checked = checked);
	  renderCalendar();
	}

	function getKoreanWeekIndex(date) {
	    const first = new Date(date.getFullYear(), date.getMonth(), 1);
	    const firstMondayOffset = (first.getDay() === 0) ? 6 : first.getDay() - 1;
	    const dayOffset = date.getDate() + firstMondayOffset - 1;
	    return Math.floor(dayOffset / 7) + 1;
	}

	function isLastWeekOfMonth(date) {
	    const test = new Date(date);
	    test.setDate(test.getDate() + 7);
	    return test.getMonth() !== date.getMonth();
	}

	function renderCalendar() {
	  const calendar = document.getElementById("calendar");
	  calendar.innerHTML = "";

	  const today = new Date();
	  today.setHours(0, 0, 0, 0);

	  const firstDay = new Date(calendarYear, calendarMonth, 1).getDay();
	  const daysInMonth = new Date(calendarYear, calendarMonth + 1, 0).getDate();
	  const repeatType = document.getElementById("repeatType").value;
	  const allDay = document.getElementById("allDay").checked;
	  const startTime = document.querySelector("input[name='repeat.repeatTime']")?.value || "";
	  const interval = parseInt(document.querySelector("input[name='repeat.interval']")?.value || "1", 10);
	  const weeklyOption = document.querySelector("input[name='weeklyOption']:checked")?.value || "interval";

	  // ì„ íƒëœ ìš”ì¼ ê°€ì ¸ì˜¤ê¸°
	  const checkedDaysInterval = Array.from(document.querySelectorAll("input[name='repeat.weekDaysInterval']:checked"))
	    .map(cb => weekdayMap[cb.value]);
	  const checkedDaysNth = Array.from(document.querySelectorAll("input[name='repeat.weekDays']:checked"))
	    .map(cb => weekdayMap[cb.value]);

	  // ì„ íƒëœ Nì§¸ì£¼
	  const nthWeeks = Array.from(document.querySelectorAll("input[name='repeat.nthWeeks']:checked"))
	    .map(cb => cb.value);

	  const weekdays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
	  weekdays.forEach(dayName => {
	    const weekdayHeader = document.createElement("div");
	    weekdayHeader.className = "day header";
	    weekdayHeader.textContent = dayName;
	    calendar.appendChild(weekdayHeader);
	  });

	  document.getElementById("calendarHeader").innerText = `${calendarYear}ë…„ ${calendarMonth + 1}ì›”`;

	  // ë¹ˆì¹¸ (ì²«ì§¸ì£¼ ì‹œì‘ìš”ì¼ ì• ê³µë°±)
	  for (let i = 0; i < firstDay; i++) {
	    calendar.innerHTML += `<div class="day"></div>`;
	  }

	  for (let day = 1; day <= daysInMonth; day++) {
	    const currentDate = new Date(calendarYear, calendarMonth, day);
	    const currentMidnight = new Date(currentDate);
	    currentMidnight.setHours(0, 0, 0, 0);
	    const dayOfWeek = currentDate.getDay();
	    const isToday = currentMidnight.getTime() === today.getTime();
	    let highlight = false;

	    if (repeatType === "DAILY") {
	      const diffDays = Math.floor((currentMidnight - today) / (1000 * 60 * 60 * 24));
	      highlight = diffDays % interval === 0 && diffDays >= 0;
	    }

		if (repeatType === "WEEKLY") {
		  if (weeklyOption === "interval") {
		    const startDate = new Date();
		    startDate.setHours(0, 0, 0, 0);

		    // ê¸°ì¤€ì¼ì´ ì†í•œ ì£¼ ì¼ìš”ì¼
			const startWeekMonday = new Date(startDate);
			const startDay = startDate.getDay();
			const offsetToMonday = (startDay === 0) ? -6 : 1 - startDay;
			startWeekMonday.setDate(startDate.getDate() + offsetToMonday);

		    // í˜„ì¬ ë‚ ì§œê°€ ì†í•œ ì£¼ ì¼ìš”ì¼
		    const currentWeekSunday = new Date(currentMidnight);
		    currentWeekSunday.setDate(currentWeekSunday.getDate() - currentWeekSunday.getDay());

			const currentWeekMonday = new Date(currentMidnight);
			const currentDay = currentWeekMonday.getDay();
			const currentOffset = (currentDay === 0) ? -6 : 1 - currentDay;
			currentWeekMonday.setDate(currentWeekMonday.getDate() + currentOffset);

			const diffWeeks = Math.floor((currentWeekMonday - startWeekMonday) / (1000 * 60 * 60 * 24 * 7));

		    if (
		      diffWeeks >= 0 &&
		      diffWeeks % interval === 0 &&
		      checkedDaysInterval.includes(dayOfWeek)
		    ) {
		      highlight = true;
		    }
		  }


	      if (weeklyOption === "nth") {
	        if (currentMidnight >= today && checkedDaysNth.includes(dayOfWeek)) {
	          const weekIndex = getKoreanWeekIndex(currentDate);
	          const isLast = isLastWeekOfMonth(currentDate);
	          const isMatchedWeek =
	            nthWeeks.includes(weekIndex.toString()) || (isLast && nthWeeks.includes("LAST"));

	          if (isMatchedWeek) {
	            highlight = true;
	          }
	        }
	      }
	    }

	    const timeText = (!allDay && highlight) ? `<div class="timeLabel">${startTime}</div>` : "";

	    calendar.innerHTML += `
	      <div class="day ${highlight ? "highlight" : ""} ${isToday ? "today" : ""}">
	        ${day}
	        ${timeText}
	      </div>
	    `;
	  }
	}

	function goToPrevMonth() {
	    if (calendarMonth === 0) {
	      calendarMonth = 11;
	      calendarYear -= 1;
	    } else {
	      calendarMonth -= 1;
	    }
	    renderCalendar();
	}

	function goToNextMonth() {
	    if (calendarMonth === 11) {
	      calendarMonth = 0;
	      calendarYear += 1;
	    } else {
	      calendarMonth += 1;
	    }
	    renderCalendar();
	}

	window.addEventListener("DOMContentLoaded", () => {
	    const today = new Date();
	    calendarYear = today.getFullYear();
	    calendarMonth = today.getMonth();

	    document.getElementById("prevMonthBtn").addEventListener("click", goToPrevMonth);
	    document.getElementById("nextMonthBtn").addEventListener("click", goToNextMonth);

	    document.getElementById("repeatType").addEventListener("change", onRepeatTypeChange);

	    document.querySelector("input[name='repeat.interval']").addEventListener("input", () => {
	      updateIntervalUnit();
	      renderCalendar();
	    });
		
		document.querySelector("input[name='repeat.repeatTime']").addEventListener("input", () => {
		  renderCalendar();
		});


	    document.getElementById("allDay").addEventListener("change", () => {
	      updateTimeVisibility();
	      renderCalendar();
	    });

	    const inputs = [
	      ...document.querySelectorAll("input[name='repeat.weekDaysInterval']"),
	      ...document.querySelectorAll("input[name='repeat.weekDays']"),
	      ...document.querySelectorAll("input[name='repeat.nthWeeks']"),
	      ...document.querySelectorAll("input[name='weeklyOption']")
	    ];
	    inputs.forEach(input => input.addEventListener("change", () => {
			if(input.name === 'weeklyOption') onWeeklyOptionChange();
			else renderCalendar();
		}));

	    onRepeatTypeChange();
	    renderCalendar();
	});
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	const amountInput = document.getElementById('amount');
	const amountError = document.getElementById('amountError');

	function validateAmount() {
	  const value = amountInput.value;
	  if (!/^\d+$/.test(value) || parseInt(value) <= 0) {
	    amountError.textContent = "1 ì´ìƒì˜ ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.";
	    amountInput.setCustomValidity("1 ì´ìƒì˜ ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
	  } else {
	    amountError.textContent = "";
	    amountInput.setCustomValidity("");
	  }
	}

	// ì œì¶œ ì „ ê²€ì‚¬
	document.getElementById('goalForm').addEventListener('submit', function (e) {
	  validateAmount();
	  if (!amountInput.checkValidity()) {
	    e.preventDefault();
	    amountInput.focus();
	  }
	});

	// ì‹¤í˜„ ê°€ëŠ¥ì„± ì„ íƒ ì‹œ ì œì•ˆ ë©”ì‹œì§€ ì¶œë ¥
	document.getElementById('feasibilityLevel').addEventListener('change', function () {
	  const level = this.value;
	  const amount = parseInt(amountInput.value);
	  const suggestionDiv = document.getElementById('suggestionMessage');

	  if (!amount || amount <= 0 || isNaN(amount)) {
	    suggestionDiv.textContent = '';
	    return;
	  }

	  let suggestion = '';

	  if (level === 'medium' || level === 'low') {
	    if (amount >= 30) {
	      const reduced = amount - (level === 'medium' ? 10 : 15);
	      suggestion = `${reduced} ì •ë„ë¡œ ì¤„ì—¬ì„œ ê¾¸ì¤€íˆ í•´ë³´ëŠ” ê±´ ì–´ë•Œìš”? ì§€ì†í•˜ëŠ” ê²Œ ë” ì¤‘ìš”í•˜ë‹ˆê¹Œìš”!`;
	    } else if (amount >= 10) {
	      const reduced = amount - (level === 'medium' ? 5 : 8);
	      suggestion = `${reduced} ì •ë„ë¡œ ì‹œì‘í•´ë³´ë©´ ë¶€ë‹´ì´ ëœí•  ê±°ì˜ˆìš”. ìì‹ ê° ìˆê²Œ ê°€ë´…ì‹œë‹¤!`;
	    } else if (amount >= 5) {
	      const reduced = amount - (level === 'medium' ? 2 : 3);
	      suggestion = `${reduced} ì •ë„ë¶€í„° ì‹œì‘í•´ë³´ë©´ ìŠµê´€ ë“¤ì´ê¸°ì— ì¢‹ì„ ê²ƒ ê°™ì•„ìš” ğŸ˜Š`;
	    } else {
	      suggestion = `ì§€ê¸ˆ ëª©í‘œë„ ì•„ì£¼ ì¢‹ì•„ìš”! ì¤‘ìš”í•œ ê±´ ì‹œì‘í•˜ëŠ” ìš©ê¸°ì™€ ê¾¸ì¤€í•¨ì´ì—ìš” ğŸ’–`;
	    }
	  } else {
	    suggestion = `ì¢‹ì•„ìš”! ì´ ì •ë„ë©´ ì¶©ë¶„íˆ í•´ë‚¼ ìˆ˜ ìˆì„ ê±°ì˜ˆìš” ğŸ’ª`;
	  }

	  suggestionDiv.textContent = suggestion;
	});
  </script>
</head>
<body>
	<form id="goalForm" th:action="@{/goal/save}" method="post">
  <h2>ìŠµê´€ ë“±ë¡</h2>

    <div>
      <label>ìŠµê´€ ì´ë¦„</label>
      <input type="text" name="title" required>
    </div>

		    <!-- 1. êµ¬ì²´ì ì¸ ëª©í‘œ -->
	    <label for="what">1ï¸âƒ£ ëª©í‘œë¥¼ ìœ„í•´ ë¬´ì—‡ì„ ì–¼ë§Œí¼ í•  ê±´ê°€ìš”?</label>  
	    <div class="example">ì˜ˆ: ë‹¨ì–´ ì•”ê¸° 30ê°œ / ëŸ¬ë‹ 5km / ë¬¸ì œ í’€ì´ 3íšŒ</div>
	    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
	      <input type="text" id="what" name="what" placeholder="ì˜ˆ: ë‹¨ì–´ ì•”ê¸°" style="flex: 2;" required />
	      <input type="number" id="amount" name="amount" placeholder="ì˜ˆ: 30" style="flex: 1;" required min="1" oninput="validateAmount()" />
	      <input type="text" id="unit" name="unit" placeholder="ì˜ˆ: ê°œ / ë¶„ / íšŒ ë“±" style="flex: 1;" required />
	    </div>
	    <div id="amountError" class="example" style="color: red;"></div>

	    <!-- 6. ëª©í‘œê°€ ë¶€ë‹´ë˜ì§€ ì•Šë‚˜ìš”? -->
	    <label for="feasibility">2ï¸âƒ£ ì´ ëª©í‘œê°€ ì–¼ë§ˆë‚˜ ì‹¤í˜„ ê°€ëŠ¥í•˜ë‹¤ê³  ëŠê»´ì§€ë‚˜ìš”?</label>
	    <select id="feasibilityLevel" name="feasibilityLevel" required>
	      <option value="">-- ì„ íƒ --</option>
	      <option value="high">ì¶©ë¶„íˆ ê°€ëŠ¥í•´ìš” (ìƒ)</option>
	      <option value="medium">ì¡°ê¸ˆ ë¶€ë‹´ë¼ìš” (ì¤‘)</option>
	      <option value="low">ë§ì´ ì–´ë ¤ì›Œìš” (í•˜)</option>
	    </select>
	    <div id="suggestionMessage" class="example"></div>

		<label>3ï¸âƒ£ ë°˜ë³µ ê¸°ê°„ì„ ì •í•´ë³´ì„¸ìš”.</label>
		
    <div>
		<BR>
      <label>ë°˜ë³µ ìœ í˜•</label>
      <select name="repeat.repeatType" id="repeatType">
        <option value="DAILY">ë§¤ì¼</option>
        <option value="WEEKLY">ë§¤ì£¼</option>
        <option value="WEEKLY_COUNT">ì£¼ NíšŒ</option>
        <option value="MONTHLY_COUNT">ì›” NíšŒ</option>
      </select>
    </div>

    <div id="weeklyOptionSelector" style="display: none;">
      <label><input type="radio" name="weeklyOption" value="interval" checked> Nì£¼ë§ˆë‹¤ ë°˜ë³µ</label>
      <label><input type="radio" name="weeklyOption" value="nth"> Nì§¸ì£¼ë§ˆë‹¤</label>
    </div>

    <div id="intervalSection" style="display: none;">
      <label>ë°˜ë³µ ê°„ê²©</label>
      <input type="number" name="repeat.interval" min="1" value="1">
      <span id="intervalUnit">ì¼ë§ˆë‹¤</span>
    </div>

    <div id="repeatFrequencySection" style="display: none;">
      <label>ë°˜ë³µ íšŸìˆ˜</label>
      <span id="frequencyUnitText">ì£¼</span>
      <input type="number" name="repeat.frequencyCount" min="1" max="365" value="1">
      <span>íšŒ</span>
    </div>

    <div id="nthWeekSection" style="display: none;">
      <label>í•´ë‹¹ ì£¼ì°¨</label><br>
      <label><input type="checkbox" name="repeat.nthWeeks" value="1">1ì§¸ì£¼</label>
      <label><input type="checkbox" name="repeat.nthWeeks" value="2">2ì§¸ì£¼</label>
      <label><input type="checkbox" name="repeat.nthWeeks" value="3">3ì§¸ì£¼</label>
      <label><input type="checkbox" name="repeat.nthWeeks" value="4">4ì§¸ì£¼</label>
      <label><input type="checkbox" name="repeat.nthWeeks" value="LAST">ë§ˆì§€ë§‰</label><br>
    </div>

    <div id="weekDaysSection" style="display: none;">

      <!-- Nì£¼ë§ˆë‹¤ ë°˜ë³µìš© ìš”ì¼ ì²´í¬ë°•ìŠ¤ (ì´ë¦„ ë¶„ë¦¬) -->
	  <div id="weekDaysIntervalSection">
      <div><strong>Nì£¼ë§ˆë‹¤ Nìš”ì¼</strong></div>
      <label><input type="checkbox" onclick="selectWeekDays('weekdays', this.checked)">í‰ì¼</label>
      <label><input type="checkbox" onclick="selectWeekDays('weekends', this.checked)">ì£¼ë§</label><br>
      <label><input type="checkbox" name="repeat.weekDaysInterval" value="MON" class="weekday-interval">ì›”</label>
      <label><input type="checkbox" name="repeat.weekDaysInterval" value="TUE" class="weekday-interval">í™”</label>
      <label><input type="checkbox" name="repeat.weekDaysInterval" value="WED" class="weekday-interval">ìˆ˜</label>
      <label><input type="checkbox" name="repeat.weekDaysInterval" value="THU" class="weekday-interval">ëª©</label>
      <label><input type="checkbox" name="repeat.weekDaysInterval" value="FRI" class="weekday-interval">ê¸ˆ</label>
      <label><input type="checkbox" name="repeat.weekDaysInterval" value="SAT" class="weekend-interval">í† </label>
      <label><input type="checkbox" name="repeat.weekDaysInterval" value="SUN" class="weekend-interval">ì¼</label>
	  </div>

      <!-- Nì§¸ì£¼ë§ˆë‹¤ìš© ìš”ì¼ ì²´í¬ë°•ìŠ¤ (ê¸°ì¡´ ì´ë¦„ ìœ ì§€) -->
	  <div id="weekDaysNthSection">
      <div><strong>Nì§¸ì£¼ë§ˆë‹¤ Nìš”ì¼</strong></div>
      <label><input type="checkbox" onclick="selectNthWeekDays('weekday-nth', this.checked)">í‰ì¼</label>
      <label><input type="checkbox" onclick="selectNthWeekDays('weekend-nth', this.checked)">ì£¼ë§</label><br>
      <label><input type="checkbox" name="repeat.weekDays" value="MON" class="weekday-nth">ì›”</label>
      <label><input type="checkbox" name="repeat.weekDays" value="TUE" class="weekday-nth">í™”</label>
      <label><input type="checkbox" name="repeat.weekDays" value="WED" class="weekday-nth">ìˆ˜</label>
      <label><input type="checkbox" name="repeat.weekDays" value="THU" class="weekday-nth">ëª©</label>
      <label><input type="checkbox" name="repeat.weekDays" value="FRI" class="weekday-nth">ê¸ˆ</label>
      <label><input type="checkbox" name="repeat.weekDays" value="SAT" class="weekend-nth">í† </label>
      <label><input type="checkbox" name="repeat.weekDays" value="SUN" class="weekend-nth">ì¼</label>
    </div>  
	</div>

    <div id="timeOptionSection" style="display: none;">
      <div>
        <label>í•˜ë£¨ ì¢…ì¼</label>
        <input type="checkbox" name="repeat.allDay" id="allDay" checked>
      </div>
      <div id="timeSection">
        <label>ì‹œê°„</label>
        <input type="time" name="repeat.repeatTime">
      </div>
    </div>
    <button type="submit">ë“±ë¡</button>
	  </form>
  

  <form th:action="@{/habit/add}" method="post">
  

	    <br>
		<div class="right-section">
  <div id="calendarHeaderContainer">
    <button type="button" id="prevMonthBtn">&lt; </button>
    <button type="button" id="nextMonthBtn"> &gt;</button><br><br>
    <span id="calendarHeader"></span>
  </div>

    <div id="calendar" class="calendar"></div>
	</div>

  </form>
</body>
</html>
