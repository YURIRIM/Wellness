<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>ì—°êµ¬ì¤‘...</title>
    <th:block th:replace="~{/common/fragment :: library}"></th:block>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-3"></div>
        <div class="col-6">
          <div>â­ğŸ’«ğŸŒŸì—°êµ¬ì¤‘...â­ğŸ’«ğŸŒŸ</div>
          <br /><br /><br /><br /><br /><br /><br />
          ì¼ë¯¸ë‹ˆ ì„ë² ë”© ì‚¬ìš©í•˜ê¸°
          <br />
          <div class="input-group">
            <textarea
              class="form-control"
              id="inputText"
              name="inputText"
              rows="5"
            ></textarea>
            <br />
            <button
              class="btn btn-outline-secondary"
              id="submitBtn"
              type="button"
            >
              ì œì¶œ
            </button>
          </div>

          <br />ê²°ê³¼ : <br />

          <div
            id="resultArea"
            style="
              white-space: pre-wrap;
              border: 1px solid #ddd;
              padding: 10px;
              min-height: 100px;
            "
          ></div>
          <hr />
        </div>
        <div class="col-3"></div>
      </div>
    </div>

    <script th:inline="javascript">
      const contextPath = /*[[${rootContextPath}]]*/ "/routine";

      document
        .getElementById("submitBtn")
        .addEventListener("click", function () {
          const inputText = document.getElementById("inputText").value.trim();

          if (!inputText) {
            alert("í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
          }

          const formData = new FormData();
          formData.append("inputText", inputText);
          axios
            .post(contextPath + "/lab/geminiEmbeddingTest", formData, {
              headers: { "Content-Type": "text/plain" },
            })
            .then(function (response) {
              // ì‘ë‹µ ë°ì´í„°ë¥¼ ê²°ê³¼ ì°½ì— í‘œì‹œ (JSON ë˜ëŠ” í…ìŠ¤íŠ¸ë¡œ ê°€ì •)
              const resultArea = document.getElementById("resultArea");

              // JSONì´ë¼ë©´ ì˜ˆì˜ê²Œ ì¶œë ¥
              if (typeof response.data === "object") {
                resultArea.textContent = JSON.stringify(response.data, null, 2);
              } else {
                resultArea.textContent = response.data;
              }
            })
            .catch(function (error) {
              console.log(error.response?.data || error.message);
            });
        });
    </script>
  </body>
</html>
